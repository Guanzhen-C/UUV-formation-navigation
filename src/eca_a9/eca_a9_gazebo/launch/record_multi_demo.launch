<launch>
  <arg name="record" default="false"/>
  <arg name="bag_filename" default="multi_recording.bag"/>
  <arg name="use_ned_frame" default="false"/>

  <group if="$(arg record)">
    <node pkg="rosbag" type="record" name="multi_recording"
      args="record -O $(arg bag_filename)
        /eca_a9_1/dp_controller/trajectory
        /eca_a9_1/dp_controller/reference
        /eca_a9_1/pose_gt_ned
        /eca_a9_1/dp_controller/error
        /eca_a9_1/control_allocation/control_input
        /eca_a9_1/thrusters/0/thrust
        /eca_a9_1/thrusters/0/input
        /eca_a9_1/fins/0/input
        /eca_a9_1/fins/1/input
        /eca_a9_1/fins/2/input
        /eca_a9_1/fins/3/input
        /eca_a9_1/fins/0/output
        /eca_a9_1/fins/1/output
        /eca_a9_1/fins/2/output
        /eca_a9_1/fins/3/output
        /eca_a9_2/dp_controller/trajectory
        /eca_a9_2/dp_controller/reference
        /eca_a9_2/pose_gt_ned
        /eca_a9_2/dp_controller/error
        /eca_a9_2/control_allocation/control_input
        /eca_a9_2/thrusters/0/thrust
        /eca_a9_2/thrusters/0/input
        /eca_a9_2/fins/0/input
        /eca_a9_2/fins/1/input
        /eca_a9_2/fins/2/input
        /eca_a9_2/fins/3/input
        /eca_a9_2/fins/0/output
        /eca_a9_2/fins/1/output
        /eca_a9_2/fins/2/output
        /eca_a9_2/fins/3/output
        /hydrodynamics/current_velocity        
        /eca_a9_1/wrench_perturbation
        /eca_a9_2/wrench_perturbation"
      if="$(arg use_ned_frame)"/>

      <node pkg="rosbag" type="record" name="multi_recording"
        args="record -O $(arg bag_filename)
          /eca_a9_1/dp_controller/trajectory
          /eca_a9_1/dp_controller/reference
          /eca_a9_1/pose_gt
          /eca_a9_1/dp_controller/error
          /eca_a9_1/control_allocation/control_input
          /eca_a9_1/thrusters/0/thrust
          /eca_a9_1/thrusters/0/input
          /eca_a9_1/fins/0/input
          /eca_a9_1/fins/1/input
          /eca_a9_1/fins/2/input
          /eca_a9_1/fins/3/input
          /eca_a9_1/fins/0/output
          /eca_a9_1/fins/1/output
          /eca_a9_1/fins/2/output
          /eca_a9_1/fins/3/output
          /eca_a9_2/dp_controller/trajectory
          /eca_a9_2/dp_controller/reference
          /eca_a9_2/pose_gt
          /eca_a9_2/dp_controller/error
          /eca_a9_2/control_allocation/control_input
          /eca_a9_2/thrusters/0/thrust
          /eca_a9_2/thrusters/0/input
          /eca_a9_2/fins/0/input
          /eca_a9_2/fins/1/input
          /eca_a9_2/fins/2/input
          /eca_a9_2/fins/3/input
          /eca_a9_2/fins/0/output
          /eca_a9_2/fins/1/output
          /eca_a9_2/fins/2/output
          /eca_a9_2/fins/3/output
          /hydrodynamics/current_velocity
          /eca_a9_1/wrench_perturbation
          /eca_a9_2/wrench_perturbation"
        unless="$(arg use_ned_frame)"/>
  </group>
</launch>
